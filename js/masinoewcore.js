/*!
 * Core JavaScript for PHPMaker v2022.11.0
 * Copyright (c) e.World Technology Limited. All rights reserved.
 */
var ew=function(){"use strict";var devnull=function(){},bundleIdCache={},bundleResultCache={},bundleCallbackQueue={};function subscribe(bundleIds,callbackFn){bundleIds=bundleIds.push?bundleIds:[bundleIds];var depsNotFound=[],i=bundleIds.length,numWaiting=i,fn,bundleId,r,q;fn=function(bundleId,pathsNotFound){if(pathsNotFound.length)depsNotFound.push(bundleId);numWaiting--;if(!numWaiting)callbackFn(depsNotFound)};while(i--){bundleId=bundleIds[i];r=bundleResultCache[bundleId];if(r){fn(bundleId,r);continue}q=bundleCallbackQueue[bundleId]=bundleCallbackQueue[bundleId]||[];q.push(fn)}}function publish(bundleId,pathsNotFound){if(!bundleId)return;var q=bundleCallbackQueue[bundleId];bundleResultCache[bundleId]=pathsNotFound;if(!q)return;while(q.length){q[0](bundleId,pathsNotFound);q.splice(0,1)}}function executeCallbacks(args,depsNotFound){if(args.call)args={success:args};if(depsNotFound.length)(args.error||devnull)(depsNotFound);else(args.success||devnull)(args)}function loadFile(path,callbackFn,args,numTries){var doc=document,async=args.async,maxTries=(args.numRetries||0)+1,beforeCallbackFn=args.before||devnull,pathname=path.replace(/[\?|#].*$/,""),pathStripped=path.replace(/^(css|img)!/,""),e;numTries=numTries||0;if(/(^css!|\.css$)/.test(pathname)){e=doc.createElement("link");e.rel="stylesheet";e.href=pathStripped}else if(/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(pathname)){e=doc.createElement("img");e.src=pathStripped}else{e=doc.createElement("script");e.src=path;e.async=async===undefined?true:async}e.onload=e.onerror=e.onbeforeload=function(ev){var result=ev.type[0];if(result=="e"){numTries+=1;if(numTries<maxTries){return loadFile(path,callbackFn,args,numTries)}}else if(e.rel=="preload"&&e.as=="style"){return e.rel="stylesheet"}callbackFn(path,result,ev.defaultPrevented)};if(beforeCallbackFn(path,e)!==false&&e.tagName!="IMG")doc.head.appendChild(e)}function loadFiles(paths,callbackFn,args){paths=paths.push?paths:[paths];var numWaiting=paths.length,x=numWaiting,pathsNotFound=[],fn,i;fn=function(path,result,defaultPrevented){if(result=="e")pathsNotFound.push(path);if(result=="b"){if(defaultPrevented)pathsNotFound.push(path);else return}numWaiting--;if(!numWaiting)callbackFn(pathsNotFound)};for(i=0;i<x;i++)loadFile(paths[i],fn,args)}function loadjs(paths,arg1,arg2){var bundleId,args;if(arg1&&arg1.trim)bundleId=arg1;args=(bundleId?arg2:arg1)||{};if(bundleId){if(bundleId in bundleIdCache){throw"LoadJS"}else{bundleIdCache[bundleId]=true}}function loadFn(resolve,reject){loadFiles(paths,(function(pathsNotFound){executeCallbacks(args,pathsNotFound);if(resolve){executeCallbacks({success:resolve,error:reject},pathsNotFound)}publish(bundleId,pathsNotFound)}),args)}if(args.returnPromise)return new Promise(loadFn);else loadFn()}loadjs.ready=function ready(deps,args){subscribe(deps,(function(depsNotFound){executeCallbacks(args,depsNotFound)}));return loadjs};loadjs.done=function done(bundleId){publish(bundleId,[])};loadjs.reset=function reset(){bundleIdCache={};bundleResultCache={};bundleCallbackQueue={}};loadjs.isDefined=function isDefined(bundleId){return bundleId in bundleIdCache};let Language=function Language(obj){this.obj=obj;this.phrase=function(id){return this.obj[id.toLowerCase()]}};function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype);subClass.prototype.constructor=subClass;_setPrototypeOf(subClass,superClass)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}let SelectionListOption=function SelectionListOption(value,text,selected){this.value=String(value);this.text=String(text);this.selected=!!selected};let SelectionList=function(_HTMLElement){_inheritsLoose(SelectionList,_HTMLElement);function SelectionList(){var _this;_this=_HTMLElement.call(this)||this;_defineProperty(_assertThisInitialized(_this),"containerClass","d-sm-table");_defineProperty(_assertThisInitialized(_this),"rowClass","d-sm-table-row");_defineProperty(_assertThisInitialized(_this),"cellClass","d-sm-table-cell");_defineProperty(_assertThisInitialized(_this),"options",[]);_this._internals=_this.attachInternals();return _this}var _proto=SelectionList.prototype;_proto.connectedCallback=function connectedCallback(){let value=this.getAttribute("value")||"",values=this.multiple?value.split(ew.MULTIPLE_OPTION_SEPARATOR):[value];for(let val of values)this.add(val,"",true)};_proto.add=function add(value,text,selected){let option=new SelectionListOption(value,text,selected),index=this.options.findIndex((option=>option.value==value));if(index>-1)this.options[index]=option;else this.options.push(option)};_proto.remove=function remove(index){let option=this.options[index];if(option)this.options.splice(index,1)};_proto.removeAll=function removeAll(){this.options.splice(0)};_proto.clear=function clear(){for(let option of this.options)option.selected=false;this.render()};_proto.getRandom=function getRandom(){return Math.floor(Math.random()*(999999-1e5))+1e5};_proto.triggerChange=function triggerChange(){const event=new Event("change",{view:window,bubbles:true,cancelable:false});this.dispatchEvent(event)};_proto.isInvalid=function isInvalid(className){return/\bis-invalid\b/.test(className)};_proto.attributeChangedCallback=function attributeChangedCallback(name,oldValue,newValue){if(name=="class"){if(this.targetId&&this.isInvalid(oldValue)!=this.isInvalid(newValue)){let target=document.getElementById(this.targetId),inputs=target.querySelectorAll("input"),isInvalid=this.isInvalid(newValue);Array.prototype.forEach.call(inputs,(input=>input.classList.toggle("is-invalid",isInvalid)))}}else if(name=="value"){this._internals.setFormValue(this.value);if(this.value!=="")this.classList.remove("is-invalid")}};_proto.render=function render(){let target=this.target,template=this.template;if(!target||!template||!this.list)return;while(target.firstChild)target.removeChild(target.firstChild);target.style.cursor="wait";let self=this,content=template.content,cols=this.columns||1,tbl=document.createElement("div"),cnt=this.length,radioSuffix="_"+this.getRandom(),isInvalid=this.classList.contains("is-invalid"),row;tbl.className=this.containerClass+" ew-item-container";target.append(tbl);try{let options=this.options.filter((opt=>opt.value));options.forEach(((option,i)=>{let clone=content.cloneNode(true),input=clone.querySelector("input"),label=clone.querySelector("label"),suffix="_"+this.getRandom();input.name=input.name+(input.type=="radio"?radioSuffix:suffix);input.id=input.id+suffix;input.value=option.value;input.setAttribute("data-index",i);input.checked=option.selected;input.classList.add("ew-custom-option");if(isInvalid)input.classList.add("is-invalid");input.addEventListener("click",(function(){let index=parseInt(this.getAttribute("data-index"),10);if(self.type=="select-one"){for(let option of self.options)option.selected=false}self.options[index].selected=this.checked;self.setAttribute("value",self.value);self.triggerChange()}));label.innerHTML=option.text;label.htmlFor=input.id;let cell=document.createElement("div");cell.className=this.cellClass;cell.appendChild(clone);if(i%cols==0){row=document.createElement("div");row.className=this.rowClass}row.append(cell);if(i%cols==cols-1){tbl.append(row)}else if(i==cnt-1){for(let j=i%cols+1;j<cols;j++){let c=document.createElement("div");c.className=this.cellClass;row.append(c)}tbl.append(row)}}));this.setAttribute("value",this.value)}finally{target.style.cursor="default"}};_proto.focus=function focus(){if(this.list){var _this$target,_this$target$querySel;(_this$target=this.target)==null?void 0:(_this$target$querySel=_this$target.querySelector("input"))==null?void 0:_this$target$querySel.focus()}else{_HTMLElement.prototype.focus.call(this)}};_createClass(SelectionList,[{key:"form",get:function(){return this._internals.form}},{key:"name",get:function(){return this.getAttribute("name")}},{key:"targetId",get:function(){return this.getAttribute("data-bs-target")}},{key:"target",get:function(){return this.parentNode.querySelector("#"+this.targetId)}},{key:"templateId",get:function(){return this.getAttribute("data-template")}},{key:"template",get:function(){return this.parentNode.querySelector("#"+this.templateId)}},{key:"inputId",get:function(){return this.getAttribute("data-input")}},{key:"input",get:function(){return this.parentNode.querySelector("#"+this.inputId)}},{key:"list",get:function(){return this.options}},{key:"columns",get:function(){var _ew;if((_ew=ew)!=null&&_ew.IS_MOBILE){return 1}else{let cols=this.getAttribute("data-repeatcolumn");return cols?parseInt(cols,10):1}}},{key:"length",get:function(){return this.options.length}},{key:"selectedIndex",get:function(){for(let option of this.options){if(option.selected)return option.index}return-1},set:function(index){let option=this.options[index];if(option){this.options.forEach((option=>option.selected=false));option.selected=true;this.render()}}},{key:"type",get:function(){return this.getAttribute("data-type")||this.getAttribute("type")}},{key:"multiple",get:function(){if(this.hasAttribute("data-multiple")){return this.getAttribute("data-multiple")!="0"}else{return this.type=="select-multiple"}}},{key:"value",get:function(){if(this.type=="select-one"||this.type=="select-multiple"){return this.values.join(ew.MULTIPLE_OPTION_SEPARATOR||",")}else{return this.getAttribute("value")}},set:function(val){if(this.type=="select-one"){for(let option of this.options)option.selected=option.value==val}else if(this.type=="select-multiple"){let ar;if(Array.isArray(val)){ar=val.map((v=>v!=null?v:String(v)))}else{var _val;val=(_val=val)!=null?_val:String(val);ar=val?val.split(ew.MULTIPLE_OPTION_SEPARATOR||","):[]}for(let option of this.options)option.selected=ar.includes(String(option.value))}else{this.setAttribute("value",val)}this.render()}},{key:"values",get:function(){if(this.type=="select-one"||this.type=="select-multiple"){return Array.prototype.filter.call(this.options,(option=>option.selected)).map((option=>option.value))}else{let val=this.getAttribute("value");return val?val.split(ew.MULTIPLE_OPTION_SEPARATOR||","):[]}}}],[{key:"observedAttributes",get:function(){return["class","value"]}},{key:"formAssociated",get:function(){return true}}]);return SelectionList}(_wrapNativeSuper(HTMLElement));window.loadjs=loadjs;customElements.define("selection-list",SelectionList);let noop=()=>{},templateCallback=o=>(o.element instanceof HTMLOptionElement?o.element.innerHTML:"")||o.text;let ew$1={PAGE_ID:"",RELATIVE_PATH:"",MULTIPLE_OPTION_SEPARATOR:",",GENERATE_PASSWORD_UPPERCASE:true,GENERATE_PASSWORD_LOWERCASE:true,GENERATE_PASSWORD_NUMBER:true,GENERATE_PASSWORD_SPECIALCHARS:1,CONFIRM_CANCEL:true,ROWTYPE_ADD:2,ROWTYPE_EDIT:3,UNFORMAT_YEAR:50,LAZY_LOAD_DELAY:0,AJAX_DELAY:5,LOOKUP_DELAY:250,MAX_OPTION_COUNT:3,NUMBERING_SYSTEM:"",USE_OVERLAY_SCROLLBARS:true,Language:Language,language:null,vars:null,maps:{},addOptionDialog:null,emailDialog:null,importDialog:null,modalDialog:null,modalLookupDialog:null,ajaxBatchSize:10,autoSuggestSettings:{highlight:true,hint:true,minLength:1,debounce:250,delay:250,templates:{},classNames:{menu:"tt-menu dropdown-menu",input:"tt-input form-control",dataset:"tt-dataset",suggestion:"tt-suggestion dropdown-item",cursor:"tt-cursor"}},lightboxSettings:{transition:"none",photo:true,opacity:.5},uploadOptions:{},importUploadOptions:{maxFileSize:1e7,maxNumberOfFiles:10},sweetAlertSettings:{showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{container:"ew-swal2-container",popup:"ew-swal2-popup",header:"ew-swal2-header",title:"ew-swal2-title",closeButton:"ew-swal2-close-button",icon:"ew-swal2-icon",image:"ew-swal2-image",htmlContainer:"ew-swal2-html-container",content:"ew-swal2-content",input:"form-control ew-swal2-input",inputLabel:"ew-swal2-input-label",validationMessage:"ew-swal2-validation-message",actions:"ew-swal2-actions",confirmButton:"btn btn-primary ew-swal2-confirm-button",denyButton:"btn btn-danger ew-swal2-deny-button",cancelButton:"btn btn-secondary ew-swal2-cancel-button",loader:"ew-swal2-loader",footer:"ew-swal2-footer"}},selectOptions:{allowClear:true,theme:"bootstrap5",width:"style",minimumResultsForSearch:20,escapeMarkup:v=>v,templateResult:templateCallback,templateSelection:templateCallback,debounce:250,customOption:true,containerClass:"d-sm-table",rowClass:"d-sm-table-row",cellClass:"d-sm-table-cell text-nowrap",iconClass:"form-check-label"},selectMinimumInputLength:1,modalLookupOptions:{allowClear:true,theme:"bootstrap5",width:"100%",escapeMarkup:v=>v,templateResult:templateCallback,templateSelection:templateCallback,closeOnSelect:false,minimumInputLength:0,dropdownCssClass:"ew-modal-dropdown",modal:true,debounce:250,draggableOptions:{cursor:"grabbing"}},filterOptions:{allowClear:true,theme:"bootstrap5",width:"100%",escapeMarkup:v=>v,templateResult:templateCallback,templateSelection:templateCallback,closeOnSelect:false,minimumInputLength:0,dropdownAutoWidth:true,dropdownCssClass:"ew-filter-dropdown",debounce:250,customOption:true,columns:1,multiple:true,preventScroll:true,containerClass:"container",rowClass:"row",cellClass:"col text-nowrap",iconClass:"form-check-label"},toastOptions:{position:"topRight"},DOMPurifyConfig:{},sanitize:function(str){return DOMPurify.sanitize(str,this.DOMPurifyConfig)},overlayScrollbarsOptions:{className:"os-theme-dark",sizeAutoCapable:true,scrollbars:{autoHide:"leave",clickScrolling:true}},draggableOptions:{cursor:"grabbing"},bundleIds:["dom","head"],sanitizeFn:null,PDFObjectOptions:{},chartConfig:{},spinnerClass:"spinner-border text-primary",jsRenderHelpers:{},jsRenderAttributes:["src","href","title"],autoHideSuccessMessage:true,autoHideSuccessMessageDelay:5e3,searchOperatorChanged:noop,setLanguage:noop,addOptionDialogShow:noop,importDialogShow:noop,toggleSearchOperator:noop,togglePassword:noop,sort:noop,selectKey:noop,export:noop,exportWithCharts:noop,setSearchType:noop,emailDialogShow:noop,selectAll:noop,selectAllKeys:noop,submitAction:noop,addGridRow:noop,confirmDelete:()=>false,deleteGridRow:()=>false};ew$1.initPanel=el=>{if(el.dataset.isset)return;let html="";for(let child of el.children){html=child.innerHTML.trim();if(html!=="")break}if(html==="")el.classList.add("d-none");el.dataset.isset=true};ew$1.panelSelectors=[".user-panel",".ew-grid-upper-panel",".ew-grid-lower-panel",".ew-multi-column-row > * > .card > .card-header",".ew-multi-column-row > * > .card > .card-footer"];ew$1.initPanels=el=>el.querySelectorAll(ew$1.panelSelectors.join(",")).forEach(ew$1.initPanel);let _initPanelsReq;let _initPanels=()=>{ew$1.initPanels(document);_initPanelsReq=requestAnimationFrame(_initPanels)};loadjs.ready("wrapper",(()=>_initPanelsReq=requestAnimationFrame(_initPanels)));document.addEventListener("DOMContentLoaded",(()=>{ew$1.initPanels(document);cancelAnimationFrame(_initPanelsReq);loadjs.done("dom")}));ew$1.loadjs=function(paths,arg1,arg2){let bundleId=arg1!=null&&arg1.trim?arg1:"";if(bundleId&&bundleId!="load"&&!ew$1.bundleIds.includes(bundleId))ew$1.bundleIds.push(bundleId);let args=(bundleId?arg2:arg1)||{};paths=Array.isArray(paths)?paths:[paths];paths=paths.filter((path=>path&&(!Array.isArray(path)||path.length)));if(args.call)args={success:args};args={...args,returnPromise:true};let clone={...args},p=Promise.resolve();delete clone.success;paths.forEach(((path,i,ar)=>{if(i==ar.length-1)p=p.then((()=>loadjs(path,bundleId||args,bundleId?args:null).catch((paths=>console.log(paths)))));else p=p.then((()=>loadjs(path,clone).catch((paths=>console.log(paths)))))}));return p};ew$1.ready=function(deps,paths,arg1,arg2){let bundleId=arg1!=null&&arg1.trim?arg1:"";if(bundleId&&bundleId!="load"&&!ew$1.bundleIds.includes(bundleId))ew$1.bundleIds.push(bundleId);loadjs.ready(deps,(function(){ew$1.loadjs(paths,arg1,arg2)}))};loadjs.ready("head",(function(){ew$1.clientScript()}));loadjs.ready("foot",(function(){ew$1.startupScript();loadjs.done("load")}));let deepAssign=function(){let extended={},overwrite=true,i=0;if(arguments[0]===false){overwrite=false;i++}if(typeof arguments[i]=="object"){extended=arguments[i];i++}let merge=function(obj){for(let prop in obj){if(obj.hasOwnProperty(prop)){if(typeof obj[prop]=="object"){extended[prop]=deepAssign(overwrite,extended[prop],obj[prop])}else{if(overwrite){extended[prop]=obj[prop]}else{if(!extended.hasOwnProperty(prop))extended[prop]=obj[prop]}}}}};for(;i<arguments.length;i++){if(typeof arguments[i]=="object")merge(arguments[i])}return extended};ew$1.deepAssign=deepAssign;ew$1.applyTemplateId=["jsrender","makerjs"];ew$1.renderTemplate=function(tmpl,data){let $=jQuery,$tmpl=tmpl!=null&&tmpl.render?tmpl:$(tmpl);if(!$tmpl.render)return;let args={$template:$tmpl,data:data};$(document).trigger("rendertemplate",[args]);let html=$tmpl.render(args.data,ew$1.jsRenderHelpers),method=args.$template.data("method"),target=args.$template.data("target");if(html&&method&&target)$(html)[method](target);else if(html&&!method&&target)$(target).html(html);else if(html&&!method&&!target)$tmpl.parent().append(html);loadjs.done("template"+target);return html};ew$1.renderJsTemplates=function(e){var _e$target;let $=jQuery,el=(_e$target=e==null?void 0:e.target)!=null?_e$target:document;Array.from(el.querySelectorAll(".ew-js-template")).sort(((a,b)=>{a=parseInt(a.dataset.seq,10)||0;b=parseInt(b.dataset.seq,10)||0;return a-b})).forEach((tmpl=>{let name=tmpl.dataset.name,data=tmpl.dataset.data;if(data&&typeof data=="string"){data=ew$1.vars[data]||window[data];if(!data)return}if(name){if(!$.render[name]){$.templates(name,tmpl.text);ew$1.renderTemplate($(tmpl),data)}}else{ew$1.renderTemplate($(tmpl),data)}}))};return ew$1}();
